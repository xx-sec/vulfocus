# Spring Data REST PATCH 请求代码执行漏洞（CVE-2017-8046）by [fengyehack](https://github.com/fengyehack)

## 一、漏洞描述

Spring Data REST是Spring Data项目的一部分，可以轻松地在Spring Data存储库之上构建超媒体驱动的REST Web服务。

恶意的PATCH请求使用精心构造的JSON数据提交到spring-data-rest服务可以执行任意JAVA代码  

## 二、漏洞影响范围

Spring Data REST versions prior to 2.5.12, 2.6.7, 3.0 RC3

可以查看spring-data-rest-webmvc jar包的版本

## 三、漏洞复现

启动Vulfocus靶场

![](./image-20200614163341.png)

访问

![](./image-20200614165319492.png)



先利用 POST 请求添加一个数据

Content-Type: application/json

{"firstName": "Vulfocus", "lastName": "Vulfocus"}

![](./image-20200614174222206.png)


PATCH请求

Content-Type: application/json-patch+json

利用代码执行漏洞 反弹shell

![](./image-20200710181712.png)



![](./image-20200710181758.png)

成功

![](./image-20200614184235237.png)


获取flag

![](./image-20200614184505493.png)